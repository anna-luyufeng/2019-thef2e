(function(t){function e(e){for(var a,r,c=e[0],o=e[1],l=e[2],f=0,_=[];f<c.length;f++)r=c[f],i[r]&&_.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(_.length)_.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==i[o]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={app:0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/2019-thef2e/week3/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"01c0":function(t,e,s){t.exports=s.p+"img/turning_effect_left.015e24b4.svg"},1486:function(t,e,s){},"37b8":function(t,e,s){t.exports=s.p+"img/turning_effect_right.8aaf412a.svg"},"55ae":function(t,e,s){"use strict";var a=s("1486"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("UserNavbar",{attrs:{"is-login":t.isLogin,"fetching-data":t.fetching,token:t.accessToken},on:{fetching:t.onFetching,signout:t.onSignout},scopedSlots:t._u([{key:"message",fn:function(){return[t.fetching?s("div",[t._v("登入中⋯⋯")]):s("div",[s("h3",[t._v("歡迎來到 Poplayer")]),s("p",[t._v("2019/8/4 目前功能尚未完成，請過陣子再回來玩耍唷～")]),s("BaseButton",{on:{click:t.goAuthPage}},[t._v("Spotify 授權")])],1),s("p",{staticClass:"copyright"},[t._v("\n        Made by\n        "),s("a",{attrs:{href:"https://github.com/littlegreening",target:"_blank"}},[t._v("Anna Lu")]),t._v(". Designed by\n        "),s("a",{attrs:{href:"https://challenge.thef2e.com/user/3115?schedule=3149#works-3149",target:"_blank"}},[t._v("Miss_Y")]),t._v(".\n      ")])]},proxy:!0}])}),s("div",{staticClass:"box",class:{"box--open":t.isLogin}},[s("div",{staticClass:"box__side box__side--top"}),s("div",{staticClass:"box__side box__side--left"}),s("div",{staticClass:"box__side box__side--bottom"}),s("div",{staticClass:"box__side box__side--right"}),s("Player",{directives:[{name:"show",rawName:"v-show",value:t.isLogin,expression:"isLogin"}],attrs:{token:t.accessToken,playback:t.playingTrack}})],1)],1)},n=[],r=(s("a481"),s("bc3a")),c=s.n(r),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",t._g({staticClass:"button",class:["button--"+t.type,{"button--block":t.block}]},t.$listeners),[t._t("default")],2)},l=[],u={props:{type:{type:String,default:"default"},block:{type:Boolean,default:!1}}},f=u,_=(s("55ae"),s("2877")),p=Object(_["a"])(f,o,l,!1,null,null,null),g=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"drawer",class:{"drawer--cover":!t.isLogin,"drawer--open":t.isLogin&&t.showNav}},[t.isLogin?[s("div",{staticClass:"navbar"},[t._m(0),s("nav",{staticClass:"nav"},[s("ul",{staticClass:"nav-list",attrs:{"data-submenu-title":"播放清單"}},t._l(t.playlists,function(e){return s("li",{key:e.id,staticClass:"nav__item",on:{click:function(s){return t.changeViewingPlaylist(e)}}},[t._v(t._s(e.name))])}),0),t._m(1),t._m(2)]),s("BaseButton",{attrs:{block:""},on:{click:function(e){return t.$emit("signout")}}},[t._v("登出")])],1),s("div",{staticClass:"playlist"},[s("div",{staticClass:"nav-toggler",on:{click:t.toggleNav}},[s("div",{staticClass:"bar"}),s("div",{staticClass:"bar"}),s("div",{staticClass:"bar"})]),s("h3",{staticClass:"playlist__name"},[t._v("每週新發現")]),s("div",{staticClass:"tracklist"},t._l(t.viewingPlaylist.tracks,function(e){var a=e.track;return s("div",{key:a.id,staticClass:"track",on:{click:function(e){return t.setPlayingTrack(a)}}},[s("div",[s("h4",{staticClass:"track__name"},[t._v(t._s(a.name))]),s("div",{staticClass:"track__album"},[t._v(t._s(a.album.name))])]),s("div",[s("div",[t._v(t._s(a.artists.map(function(t){return t.name}).join(", ")))]),s("div",[t._v(t._s(t._f("millisecondsToTime")(a.duration_ms)))])])])}),0)])]:s("div",{staticClass:"message"},[t._t("message")],2)],2)},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-field"},[s("input",{staticClass:"search-field__input",attrs:{placeholder:"搜尋",type:"search","aria-label":"搜尋"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"nav-list",attrs:{"data-submenu-title":"歌手"}},[s("li",{staticClass:"nav__item"},[t._v("Ariana Grande")]),s("li",{staticClass:"nav__item"},[t._v("Sam Smith")]),s("li",{staticClass:"nav__item"},[t._v("Jacob Lee")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"nav-list",attrs:{"data-submenu-title":"已按讚的歌曲"}},[s("li",{staticClass:"nav__item"},[t._v("Ariana Grande")]),s("li",{staticClass:"nav__item"},[t._v("Sam Smith")]),s("li",{staticClass:"nav__item"},[t._v("Jacob Lee")])])}],m=(s("7f7f"),{components:{BaseButton:g},props:{token:{type:String},isLogin:{type:Boolean,default:!1},fetchingData:{type:Boolean,default:!1}},filters:{millisecondsToTime:function(t){var e=function(t){return(t+"").length<2&&(t="0".concat(t)),t},s=t/1e3,a=Math.floor(s/60),i=Math.floor(s%60);return"".concat(a,":").concat(e(i))}},data:function(){return{showNav:!0,playlists:[],viewingPlaylist:{name:"",tracks:[]}}},watch:{token:"getUserPlaylist"},methods:{changeViewingPlaylist:function(t){var e=this;this.viewingPlaylist.name=t.name,c.a.get("https://api.spotify.com/v1/playlists/".concat(t.id,"/tracks"),{headers:{Authorization:"Bearer "+this.token}}).then(function(t){var s=t.data;e.viewingPlaylist.tracks=s.items})},setPlayingTrack:function(){},toggleNav:function(){this.showNav=!this.showNav},getUserPlaylist:function(){var t=this;this.$emit("fetching",!0),c.a.get("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer "+this.token}}).then(function(e){var s=e.data;t.playlists=s.items,t.$emit("fetching",!1)})}}}),h=m,y=(s("dcac"),Object(_["a"])(h,v,d,!1,null,null,null)),b=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"player--playing":t.isPlaying}},[a("div",{staticClass:"player__turntable"},[t._m(0),t.isPlaying?[a("img",{staticClass:"disk__effect disk__effect--left",attrs:{src:s("01c0")}}),a("img",{staticClass:"disk__effect disk__effect--right",attrs:{src:s("37b8")}})]:t._e(),a("div",{staticClass:"player__controller"},[a("div",{staticClass:"player__controller__group"},[a("BaseButton",{attrs:{type:"circle"},on:{click:t.skipToNextTrack}},[a("img",{staticClass:"button__icon",attrs:{src:s("b2f3")}})]),a("BaseButton",{attrs:{type:"circle"},on:{click:t.skipToPreviousTrack}},[a("img",{staticClass:"button__icon",attrs:{src:s("5a88")}})])],1),a("div",{staticClass:"player__controller__group"},[a("BaseButton",{class:{"button--active":"off"!==t.repeat_state,"button--active-track":"track"===t.repeat_state},attrs:{type:"circle"},on:{click:t.setRepeatMode}},[a("img",{staticClass:"button__icon",attrs:{src:s("8180")}})]),a("BaseButton",{class:{"button--active":t.suffle_state},attrs:{type:"circle"},on:{click:t.toggleShuffleState}},[a("img",{staticClass:"button__icon",attrs:{src:s("dd6e")}})])],1)])],2),a("div",{staticClass:"player__panel"},[a("div",{staticClass:"player__panel__top"},[a("div",{staticClass:"playing__info"},[a("h3",[t._v(t._s(t.playback.name))]),t._l(t.playback.artists,function(e){return a("div",{key:e.id},[t._v(t._s(e.name))])})],2),t._m(1)]),a("div",{staticClass:"player__spinning"},[a("img",{staticClass:"spinning__img",attrs:{src:s("f984")}}),a("BaseButton",{attrs:{type:"circle"},on:{click:t.togglePlaying}},[t.isPlaying?a("img",{staticClass:"button__icon",attrs:{src:s("ec7e")}}):a("img",{staticClass:"button__icon",attrs:{src:s("5830")}})])],1),a("div",{staticClass:"playing__progress"},[a("span",[t._v(t._s(t._f("millisecondsToTime")(t.playback.progress_ms)))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.playback.progress_ms,expression:"playback.progress_ms"}],attrs:{name:"progress",min:"0",max:t.playback.duration_ms,type:"range"},domProps:{value:t.playback.progress_ms},on:{__r:function(e){return t.$set(t.playback,"progress_ms",e.target.value)}}}),a("span",[t._v(t._s(t._f("millisecondsToTime")(t.playback.duration_ms)))])])])])},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"disk"},[s("img",{staticClass:"disk__img",attrs:{src:"https://source.unsplash.com/random/500x500",alt:""}}),s("div",{staticClass:"disk__hole"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player__volumn"},[a("input",{attrs:{name:"volume",min:"0",max:"11",type:"range"}}),a("img",{staticClass:"volume__icon",attrs:{src:s("865e")}})])}],x={name:"Player",components:{BaseButton:g},props:{token:{type:String},playback:{type:Object}},filters:{millisecondsToTime:function(t){var e=function(t){return(t+"").length<2&&(t="0".concat(t)),t},s=t/1e3,a=Math.floor(s/60),i=Math.floor(s%60);return"".concat(a,":").concat(e(i))}},data:function(){return{isPlaying:!1,suffle_state:!1,repeat_state:"off"}},methods:{skipToPreviousTrack:function(){},skipToNextTrack:function(){},togglePlaying:function(){this.isPlaying=!this.isPlaying},toggleShuffleState:function(){this.suffle_state=!this.suffle_state},setRepeatMode:function(){var t=["off","context","track"],e=t.indexOf(this.repeat_state),s=e===t.length-1?0:e+1;this.repeat_state=t[s]}}},P=x,w=(s("74c9"),Object(_["a"])(P,k,C,!1,null,null,null)),T=w.exports,B={name:"app",components:{BaseButton:g,UserNavbar:b,Player:T},data:function(){return{fetching:!1,isLogin:!1,accessToken:"",playingTrack:{name:"Beautiful People",duration_ms:222075,progress_ms:44272,album:{name:""},artists:[{name:"Ed Sheeran",id:"0C0XlULifJtAgn6ZNCW2eu"}]}}},mounted:function(){var t=document.location.hash;if(t){var e=new URLSearchParams(t.replace("#",""));this.accessToken=e.get("access_token"),this.isLogin=!0}},methods:{goAuthPage:function(){var t="https://accounts.spotify.com/authorize?client_id=".concat("7485b7c12b684f5cbc0f0cf1f2644872","&response_type=token&redirect_uri=").concat("https://littlegreening.github.io/2019-thef2e/week3/");window.location.href=t},onSignout:function(){this.isLogin=!1},onFetching:function(t){this.loading=t}}},S=B,L=(s("5c0b"),Object(_["a"])(S,i,n,!1,null,null,null)),O=L.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(O)}}).$mount("#app")},5830:function(t,e,s){t.exports=s.p+"img/play.c363353e.svg"},"5a88":function(t,e,s){t.exports=s.p+"img/pre.b41b6646.svg"},"5c0b":function(t,e,s){"use strict";var a=s("5e27"),i=s.n(a);i.a},"5e27":function(t,e,s){},"74c9":function(t,e,s){"use strict";var a=s("7ff8"),i=s.n(a);i.a},"7ff8":function(t,e,s){},8180:function(t,e,s){t.exports=s.p+"img/repeat.e55821ee.svg"},"82f7":function(t,e,s){},"865e":function(t,e,s){t.exports=s.p+"img/volume.d3cc93dd.svg"},b2f3:function(t,e,s){t.exports=s.p+"img/next.d470e6fd.svg"},dcac:function(t,e,s){"use strict";var a=s("82f7"),i=s.n(a);i.a},dd6e:function(t,e,s){t.exports=s.p+"img/random.4c0e792a.svg"},ec7e:function(t,e,s){t.exports=s.p+"img/pause.a54fda48.svg"},f984:function(t,e,s){t.exports=s.p+"img/spinning.327f3378.svg"}});
//# sourceMappingURL=app.55a202fb.js.map